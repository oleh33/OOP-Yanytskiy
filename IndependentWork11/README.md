# Самостійна робота №11  
## Тема: Кейси Polly/Retry – короткий звіт

### Мета
Дослідити та продемонструвати реальні/гіпотетичні сценарії використання бібліотеки Polly для реалізації політик відмовостійкості (`Retry`, `CircuitBreaker`, `Timeout`, `Fallback`) у .NET-застосунках.

### Структура проєкту
Консольний проєкт **IndependentWork11** містить три сценарії у файлі `Program.cs`:

1. **External API call with Retry**
   - **Проблема:** зовнішній HTTP‑API може тимчасово бути недоступним або повертати помилки.
   - **Політика Polly:** `Retry` з експоненційною затримкою (`WaitAndRetryAsync`).
   - **Очікувана поведінка:** перші виклики завершуються помилками `HttpRequestException`, політика виконує кілька повторних спроб зростаючою затримкою, після чого запит завершується успішно або кидається виняток.

2. **Database access with Retry + CircuitBreaker**
   - **Проблема:** база даних періодично "падає" або недоступна, множинні повторні запити лише погіршують ситуацію.
   - **Політика Polly:** комбіноване використання `Retry` та `CircuitBreaker`.
   - **Очікувана поведінка:** при окремих збоях виконується кілька повторів; якщо помилки стаються підряд — коло переходить у стан OPEN, запити тимчасово не виконуються, згодом коло повертається у стан HALF‑OPEN/Closed.

3. **Queue send with Timeout + Fallback**
   - **Проблема:** операція відправки повідомлень у чергу може зависати надто довго, блокуючи потік.
   - **Політика Polly:** `Timeout` + `Fallback`.
   - **Очікувана поведінка:** якщо відправка триває довше за заданий таймаут, генерується `TimeoutRejectedException`, спрацьовує `Fallback`, який логувує проблему та "імітує" збереження повідомлення локально.

### Звіт
Коментарі у файлі `Program.cs` містять:
- опис проблеми для кожного сценарію,
- обґрунтування вибраної політики Polly,
- опис очікуваної поведінки.

Скріншот запуску програми (логи всіх трьох сценаріїв) можна зберегти у файл:

```text
screenshots/output.png
```

### Висновок
Polly дозволяє централізовано реалізувати стратегії відмовостійкості без "захаращення" бізнес‑логіки.  
Поєднання політик `Retry`, `CircuitBreaker`, `Timeout` та `Fallback` дає змогу гнучко реагувати на тимчасові збої, захищати зовнішні сервіси та БД від перевантаження та забезпечувати більш стабільну роботу .NET‑застосунків.
